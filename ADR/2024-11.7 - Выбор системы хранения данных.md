# Выбор системы хранения данных

**Дата:** 12 декабря 2024 г.  
**Статус:** Принято

## Контекст

Для нашего сервиса онлайн-консультаций требуется масштабируемая система управления базами данных. Выбор подходящей базы данных окажет значительное влияние на производительность(PER04), масштабируемость(SCA04) и безопасность(SEC03) решения.

## Рассмотренные варианты

- **PostgreSQL:** Объектно-реляционная система управления базами данных.
- **MySQL:** Популярная реляционная система управления базами данных.
- **MongoDB:** Документоориентированная система управления базами данных.
- **SQLite:** Это быстрая и легкая встраиваемая однофайловая СУБД на языке C, которая не имеет сервера и позволяет хранить всю базу локально на одном устройстве.
- **Redis:** Высокопроизводительная система управления базами данных в памяти, поддерживающая структуры данных.

## Решение

Выбран **PostgreSQL 17.0** в качестве основной базы данных, а также **Redis** для кэширования и повышения производительности.

## Обоснование для PostgreSQL

- **Открытый исходный код:** PostgreSQL является системой с открытым исходным кодом, что обеспечивает свободу использования, модификации и распространения.
- **Поддержка сложных запросов:** PostgreSQL позволяет выполнять сложные SQL-запросы, включая подзапросы, объединения и оконные функции, что делает его мощным инструментом для анализа данных.
- **Расширяемость:** Пользователи могут создавать собственные функции, типы данных и операторы, адаптируя PostgreSQL под специфические нужды.
- **Поддержка ACID:** PostgreSQL гарантирует целостность данных и поддержку транзакций, следуя принципам ACID (атомарность, согласованность, изолированность, долговечность).
- **Масштабируемость:** PostgreSQL способен обрабатывать большие объемы данных и поддерживает как горизонтальное, так и вертикальное масштабирование.
- **Безопасность:** Система предлагает множество функций безопасности, включая аутентификацию, шифрование и управление доступом на уровне строк.
- **Сообщество и поддержка:** Активное сообщество разработчиков и пользователей обеспечивает постоянные обновления, улучшения и поддержку системы.
- **Кроссплатформенность:** PostgreSQL совместим с различными операционными системами, включая Windows, Linux и macOS.
- **Интеграция с другими инструментами:** Легкая интеграция с языками программирования и инструментами для анализа данных, такими как Python, R и BI-платформы.

## Обоснование для Redis

- **Высокая производительность:** Быстрый доступ к данным благодаря хранению в памяти, что значительно ускоряет операции чтения и записи.
- **Кэширование:** Возможность кэширования часто запрашиваемых данных, что снижает нагрузку на основную базу данных и улучшает время отклика.
- **Поддержка различных структур данных:** Возможность работы с различными структурами данных (строки, списки, множества и т.д.), что делает Redis универсальным инструментом.
- **Система публикации/подписки:** Возможность реализации механизмов реального времени, что полезно для онлайн-консультаций.

## Последствия

- **Сложность настройки и администрирования:** PostgreSQL может требовать более сложной настройки, а интеграция с Redis также может усложнить архитектуру.
- **Производительность при больших объемах данных:** Хотя PostgreSQL хорошо справляется с большими объемами данных, в некоторых случаях его производительность может уступать специализированным решениям, таким как NoSQL базы данных.
- **Использование ресурсов:** PostgreSQL и Redis могут потреблять больше системных ресурсов по сравнению с более легковесными СУБД, что может потребовать дополнительных затрат на инфраструктуру.
